# 4.1 목 객체를 사용하는 이유

실제 웹 API를 사용할때 네트워크 오류 같은 이유로 실패하는 경우도 있다.
그렇기 때문에 성공하는 경우와 실패하는 경우 모두 테스트해야 한다.

하지만 실패하는 경우를 실제 웹 API 서버에 추가하는건 옳지 않다. 이를 대신해서 사용하는것이 `목 객체`이다.

`목 객체`를 사용하면 테스트가 어려운 부분을 테스트할 수 있는것은 물론 더욱 효율적인 테스트가 가능하다.

## 4.1.1 목 객체 용어

`스텁(stub)` 혹은 `스파이(spy)`등은 개발 언어와 상관없이 테스트 자동화 관련 문헌에서 정의한 용어이다.

### 스텁(stub)

스텁은 주로 대역으로 사용한다.

-   의존중인 컴포넌트의 대역
-   정해진 값을 반환하는 용도
-   테스트 대상에 할당하는 입력값

`웹 API를 통해 특정 값을 반환받았을 때 어떤 동작을 해야한다`와 같은 테스트에 스텁을 사용한다.<br>
테스트 대상이 스텁에 접근하면 스텁은 정해진 값을 반환한다.

### 스파이(spy)

스파이는 주로 기록하는 용도다.

-   함수나 메서드의 호출 기록
-   호출된 횟수나 실행시 사용한 인수 기록
-   테스트 대상의 출력 확인

대표적인 경우로 인수로 받은 `콜백 함수`를 검증하는 것이다. 콜백 함수가 실행된 횟수, 실행시 사용한 인수 등을 기록하여 의도대로 콜백이 호출됐는지 검증할 수 있다.
